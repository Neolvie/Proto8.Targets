# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞

**–ê–≥–µ–Ω—Ç:** Architect
**–î–∞—Ç–∞:** 2026-02-14 00:20
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ

---

## –†–µ–∑—é–º–µ

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Python 3.10+ / FastAPI —Å Vanilla JS —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º: –ø–∞—Ä—Å–∏—Ç –∫–∞—Ä—Ç—É —Ü–µ–ª–µ–π Directum Targets (JSON) –∏ DOCX-–æ–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–∏, –∑–∞–ø—É—Å–∫–∞–µ—Ç 7 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö OKR-–∫–µ–π—Å–æ–≤ —á–µ—Ä–µ–∑ OpenAI SDK —Å streaming, —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ SQLite, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ç–∫-–æ—Ñ–∏—Å `/backoffice` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-----------|-----------|-------------|
| –Ø–∑—ã–∫ | Python 3.10+ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º —Å–∏—Å—Ç–µ–º—ã |
| UI | Vanilla JS (HTML/CSS/JS) | –ë–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, —Ä–∞–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ FastAPI; –ø—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–µ—Ç build-—à–∞–≥–∞ |
| Backend | FastAPI | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî API + —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ |
| LLM | OpenAI Python SDK (`openai`) | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ; –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç streaming —á–µ—Ä–µ–∑ `stream=True` |
| –ü–∞—Ä—Å–∏–Ω–≥ DOCX | python-docx | –ù–∞–¥—ë–∂–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ —Ç–∞–±–ª–∏—Ü |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | pydantic | –í—Å—Ç—Ä–æ–µ–Ω–∞ –≤ FastAPI; –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ | SQLite (—á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `sqlite3`) | –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ Docker-—Ç–æ–º–µ |
| –¢–µ—Å—Ç—ã | pytest + playwright | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ; pytest –¥–ª—è unit/integration, Playwright –¥–ª—è E2E |
| –î–µ–ø–ª–æ–π | Docker + docker-compose | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| –°—Ç–∏–ª–∏ –∏ –∏–∫–æ–Ω–∫–∏ | Directum UI Kit | https://www.directum.ru/ui-kit |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –ë—Ä–∞—É–∑–µ—Ä                            ‚îÇ
‚îÇ  index.html + app.js          backoffice.html           ‚îÇ
‚îÇ  (7 –∫–µ–π—Å–æ–≤, —á–∞—Ç, –æ—Ü–µ–Ω–∫–∏)      (–º–µ—Ç—Ä–∏–∫–∏, –≥—Ä–∞—Ñ–∏–∫–∏)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTP (fetch, SSE)         ‚îÇ HTTP (fetch)
               ‚ñº                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  FastAPI :8000                          ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  GET /                ‚Üí static/index.html               ‚îÇ
‚îÇ  GET /backoffice      ‚Üí static/backoffice.html          ‚îÇ
‚îÇ  GET /api/data/test   ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö        ‚îÇ
‚îÇ  POST /api/data/upload ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö      ‚îÇ
‚îÇ  POST /api/cases/{id} ‚Üí –∑–∞–ø—É—Å–∫ –∫–µ–π—Å–∞ (SSE streaming)   ‚îÇ
‚îÇ  POST /api/chat       ‚Üí —á–∞—Ç (SSE streaming)             ‚îÇ
‚îÇ  POST /api/feedback   ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ üëç/üëé         ‚îÇ
‚îÇ  GET /api/metrics     ‚Üí –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—ç–∫-–æ—Ñ–∏—Å–∞ (JSON)     ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Middleware: IP-capture ‚Üí MetricsStorage                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                              ‚îÇ
            ‚ñº                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Service Layer     ‚îÇ     ‚îÇ   MetricsStorage        ‚îÇ
‚îÇ                       ‚îÇ     ‚îÇ   (SQLite: metrics.db)  ‚îÇ
‚îÇ  CasesService         ‚îÇ     ‚îÇ                         ‚îÇ
‚îÇ  ChatService          ‚îÇ     ‚îÇ  - requests (IP, time,  ‚îÇ
‚îÇ  DocxParser           ‚îÇ     ‚îÇ    endpoint, case_id)   ‚îÇ
‚îÇ  JsonParser           ‚îÇ     ‚îÇ  - feedback (IP, case,  ‚îÇ
‚îÇ  LLMService (OpenAI)  ‚îÇ     ‚îÇ    vote, time)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   OpenAI API          ‚îÇ
‚îÇ   (via openai SDK)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Proto8.Targets/
‚îú‚îÄ‚îÄ .hypothesis/
‚îÇ   ‚îú‚îÄ‚îÄ 00_HYPOTHESIS.md
‚îÇ   ‚îú‚îÄ‚îÄ 01_REQUIREMENTS.md
‚îÇ   ‚îú‚îÄ‚îÄ 02_ARCHITECTURE.md
‚îÇ   ‚îî‚îÄ‚îÄ BUILD_LOG.md
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # FastAPI app, –º–∞—Ä—à—Ä—É—Ç—ã, middleware
‚îÇ   ‚îú‚îÄ‚îÄ config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env (load_dotenv)
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_service.py         # OpenAI SDK: chat, streaming
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cases_service.py       # 7 –∫–µ–π—Å–æ–≤: –ø—Ä–æ–º–ø—Ç—ã + –≤—ã–∑–æ–≤ LLM
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_service.py        # –°–≤–æ–±–æ–¥–Ω—ã–π —á–∞—Ç: –∏—Å—Ç–æ—Ä–∏—è + LLM
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json_parser.py         # –ü–∞—Ä—Å–∏–Ω–≥ JSON –∫–∞—Ä—Ç—ã —Ü–µ–ª–µ–π Targets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docx_parser.py         # –ü–∞—Ä—Å–∏–Ω–≥ DOCX –æ–ø–∏—Å–∞–Ω–∏—è —Ü–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics_storage.py     # SQLite: –∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ targets.py             # Pydantic –º–æ–¥–µ–ª–∏ –∫–∞—Ä—Ç—ã —Ü–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.py                 # Pydantic –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ API
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îú‚îÄ‚îÄ index.html             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∑–∞–≥—Ä—É–∑–∫–∞, –∫–µ–π—Å—ã, —á–∞—Ç)
‚îÇ       ‚îú‚îÄ‚îÄ style.css              # –°—Ç–∏–ª–∏ (Directum UI Kit)
‚îÇ       ‚îú‚îÄ‚îÄ app.js                 # –õ–æ–≥–∏–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (fetch, SSE, DOM)
‚îÇ       ‚îú‚îÄ‚îÄ backoffice.html        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ /backoffice
‚îÇ       ‚îî‚îÄ‚îÄ backoffice.js          # –õ–æ–≥–∏–∫–∞ –±—ç–∫-–æ—Ñ–∏—Å–∞ (fetch, Chart.js CDN)
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ Ario.json                  # –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Ü–µ–ª–µ–π (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ Ario.docx                  # –¢–µ—Å—Ç–æ–≤—ã–π DOCX (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
‚îÇ   ‚îî‚îÄ‚îÄ metrics.db                 # SQLite (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, Docker-—Ç–æ–º)
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py                # Fixtures: TestClient, temp DB
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_json_parser.py    # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ JSON
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_docx_parser.py    # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ DOCX
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_cases_service.py  # –¢–µ—Å—Ç—ã –∫–µ–π—Å–æ–≤ (mock LLM)
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_api_cases.py      # API —Ç–µ—Å—Ç—ã –∫–µ–π—Å–æ–≤ —á–µ—Ä–µ–∑ TestClient
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_api_feedback.py   # API —Ç–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_api_metrics.py    # API —Ç–µ—Å—Ç –º–µ—Ç—Ä–∏–∫ –±—ç–∫-–æ—Ñ–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ e2e/
‚îÇ       ‚îú‚îÄ‚îÄ conftest.py            # Playwright config
‚îÇ       ‚îú‚îÄ‚îÄ test_main_flow.py      # E2E: –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø—É—Å–∫ –∫–µ–π—Å–∞
‚îÇ       ‚îî‚îÄ‚îÄ test_backoffice.py     # E2E: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ pytest.ini
‚îú‚îÄ‚îÄ .coveragerc
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ TECHNICAL_DOCUMENTATION.md
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### FastAPI (src/main.py)

```python
# –ú–∞—Ä—à—Ä—É—Ç—ã:
GET  /                          ‚Üí static/index.html
GET  /backoffice                ‚Üí static/backoffice.html
GET  /api/data/test             ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç Ario.json + Ario.docx –∏–∑ /data/
POST /api/data/upload           ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON —Ç–µ–∫—Å—Ç –∏–ª–∏ —Ñ–∞–π–ª + DOCX —Ñ–∞–π–ª
POST /api/cases/{case_id}       ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–µ–π—Å (1-7), SSE streaming
POST /api/chat                  ‚Üí —Å–≤–æ–±–æ–¥–Ω—ã–π —á–∞—Ç, SSE streaming
POST /api/feedback              ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç üëç/üëé (case_id, vote, session_id)
GET  /api/metrics               ‚Üí –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –±—ç–∫-–æ—Ñ–∏—Å–∞
GET  /api/health                ‚Üí healthcheck

# Middleware:
- RequestLoggingMiddleware: –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç IP –∏–∑ X-Forwarded-For –∏–ª–∏ request.client.host
  –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ MetricsStorage –¥–ª—è –∫–∞–∂–¥–æ–≥–æ /api/ –∑–∞–ø—Ä–æ—Å–∞
```

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π UI (src/static/index.html + app.js)

–¢—Ä–∏ —Å–µ–∫—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CSS classes):

1. **–°–µ–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏** (`#section-upload`):
   - Drag-and-drop –∑–æ–Ω—ã –¥–ª—è JSON –∏ DOCX
   - –¢–µ–∫—Å—Çarea –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ JSON
   - –ö–Ω–æ–ø–∫–∞ ¬´–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É —Ü–µ–ª–µ–π: –ö–∞—Ä—Ç–∞ —Ü–µ–ª–µ–π Ario 2026¬ª
   - –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–µ–∫—Ü–∏–∏ –∫–µ–π—Å–æ–≤

2. **–°–µ–∫—Ü–∏—è –∫–µ–π—Å–æ–≤** (`#section-cases`):
   - –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ü–µ–ª–∏ (–∏–∑ JSON)
   - 7 –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–µ–π—Å–æ–≤ —Å –∫–Ω–æ–ø–∫–æ–π –∑–∞–ø—É—Å–∫–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - –û–±–ª–∞—Å—Ç—å –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (SSE streaming ‚Üí –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)
   - –ö–Ω–æ–ø–∫–∏ üëç/üëé –ø–æ–¥ –∫–∞–∂–¥—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —á–∞—Ç-–≤–∫–ª–∞–¥–∫—É

3. **–°–µ–∫—Ü–∏—è —á–∞—Ç–∞** (`#section-chat`):
   - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (sessionStorage)
   - –ü–æ–ª–µ –≤–≤–æ–¥–∞ + –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - SSE streaming –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤

### Backoffice (src/static/backoffice.html + backoffice.js)

- **–°–≤–æ–¥–∫–∞:** —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö IP, –≤—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤, % –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫
- **–¢–∞–±–ª–∏—Ü–∞ IP:** —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** Chart.js (CDN) ‚Äî –∑–∞–ø—Ä–æ—Å—ã –ø–æ –¥–Ω—è–º
- **–†–µ–π—Ç–∏–Ω–≥ –∫–µ–π—Å–æ–≤:** —Å—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è + –æ—Ü–µ–Ω–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑ 7 –∫–µ–π—Å–æ–≤
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–µ—Ç —á–µ—Ä–µ–∑ `GET /api/metrics`

### Service Layer

**LLMService (services/llm_service.py):**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI client —Å `api_key`, `base_url` (–∏–∑ OPENAI_SERVER –µ—Å–ª–∏ –∑–∞–¥–∞–Ω)
- –ú–µ—Ç–æ–¥—ã: `stream_completion(messages, model)` ‚Üí AsyncGenerator[str]
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: `ContextWindowExceededError`, `RateLimitError`

**CasesService (services/cases_service.py):**
- 7 –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–µ–π—Å–∞, –∫–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- –ü—Ä–æ–º–ø—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –≤–∫–ª—é—á–∞—é—Ç: –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é OKR, SMART-–∫—Ä–∏—Ç–µ—Ä–∏–∏, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –≤—ã–≤–æ–¥–∞
- –ö–µ–π—Å—ã 1, 2, 3, 4, 6 ‚Äî —Ç—Ä–µ–±—É—é—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ü–µ–ª—å; –∫–µ–π—Å—ã 5, 7 ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –≤—Å—é –∫–∞—Ä—Ç—É
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç AsyncGenerator –æ—Ç LLMService

**ChatService (services/chat_service.py):**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Å–µ—Å—Å–∏–∏
- –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∫–∞—Ä—Ç—ã —Ü–µ–ª–µ–π + DOCX
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç AsyncGenerator –æ—Ç LLMService

**JsonParser (services/json_parser.py):**
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Directum Targets JSON (`Payload.Nodes[]`)
- –ü–∞—Ä—Å–∏—Ç —É–∑–ª—ã –≤ pydantic-–º–æ–¥–µ–ª–∏ `GoalNode`
- –°—Ç—Ä–æ–∏—Ç –¥–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (ParentId/ChildIds)
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É –≤ —Ç–µ–∫—Å—Ç –¥–ª—è LLM-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**DocxParser (services/docx_parser.py):**
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç, –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–ø–æ —É—Ä–æ–≤–Ω—è–º), —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ python-docx
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è LLM-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**MetricsStorage (services/metrics_storage.py):**
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `/data/metrics.db`
- –¢–∞–±–ª–∏—Ü–∞ `requests`: id, ip, endpoint, case_id, timestamp
- –¢–∞–±–ª–∏—Ü–∞ `feedback`: id, ip, case_id, session_id, vote (1/-1), timestamp
- –ú–µ—Ç–æ–¥—ã: `log_request()`, `save_feedback()`, `get_metrics()`

### Pydantic Models (src/models/)

```python
# targets.py
class GoalNode(BaseModel):
    id: str
    target_id: int
    code: str
    name: str
    parent_id: Optional[str]
    child_ids: List[str]
    priority: str
    progress: float
    status_name: str
    responsible_name: str
    period_name: str

class GoalsMap(BaseModel):
    nodes: List[GoalNode]
    map_name: str

# api.py
class CaseRequest(BaseModel):
    goals_map: GoalsMap
    selected_goal_id: Optional[str]  # None –¥–ª—è –∫–µ–π—Å–æ–≤ 5, 7
    docx_content: Optional[str]

class ChatRequest(BaseModel):
    goals_map: GoalsMap
    docx_content: Optional[str]
    messages: List[dict]  # [{role, content}]

class FeedbackRequest(BaseModel):
    case_id: int  # 1-7
    session_id: str
    vote: Literal[1, -1]  # 1=üëç, -1=üëé
```

---

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
```
1. –ö–ª–∏–∫ ¬´–¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Ü–µ–ª–µ–π¬ª ‚Üí GET /api/data/test
2. FastAPI —á–∏—Ç–∞–µ—Ç /data/Ario.json + /data/Ario.docx
3. JSON –ø–∞—Ä—Å–∏—Ç—Å—è, DOCX –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç
4. –û—Ç–≤–µ—Ç: {goals_map: {...}, docx_content: "...", goals_list: [{id, name}]}
5. app.js —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ sessionStorage, –∑–∞–ø–æ–ª–Ω—è–µ—Ç dropdown —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π
6. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–µ–∫—Ü–∏–∏ –∫–µ–π—Å–æ–≤
```

### –ó–∞–ø—É—Å–∫ –∫–µ–π—Å–∞ (SSE streaming):
```
1. –ö–ª–∏–∫ –∫–Ω–æ–ø–∫–∏ –∫–µ–π—Å–∞ N ‚Üí POST /api/cases/{N}
   Body: {goals_map, selected_goal_id, docx_content}
2. FastAPI middleware –ª–æ–≥–∏—Ä—É–µ—Ç IP + case_id –≤ SQLite
3. CasesService —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–µ–π—Å–∞ N
4. LLMService.stream_completion() ‚Üí AsyncGenerator
5. FastAPI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç StreamingResponse (text/event-stream)
6. app.js —á–∏—Ç–∞–µ—Ç SSE, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ DOM
7. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ stream: –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ üëç/üëé
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏:
```
1. –ö–ª–∏–∫ üëç –∏–ª–∏ üëé ‚Üí POST /api/feedback
   Body: {case_id, session_id, vote}
2. MetricsStorage.save_feedback() ‚Üí INSERT OR REPLACE –≤ SQLite
3. –û—Ç–≤–µ—Ç: {success: true}
4. UI –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ (–∞–∫—Ç–∏–≤–Ω–∞—è/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è)
```

### –ë—ç–∫-–æ—Ñ–∏—Å:
```
1. –ë—Ä–∞—É–∑–µ—Ä ‚Üí GET /backoffice ‚Üí backoffice.html
2. backoffice.js ‚Üí GET /api/metrics
3. MetricsStorage.get_metrics() ‚Üí –∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏–∑ SQLite
4. –û—Ç–≤–µ—Ç: {ip_stats, case_stats, feedback_stats, timeline}
5. Chart.js —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏
```

---

## Docker –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### Dockerfile:
```dockerfile
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
RUN playwright install chromium --with-deps
COPY .env .env
COPY src/ src/
COPY data/ data/
COPY tests/ tests/
COPY pytest.ini .
COPY .coveragerc .
EXPOSE 8000
CMD ["uvicorn", "src.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### docker-compose.yml:
```yaml
version: "3.9"
services:
  app:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data  # –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å metrics.db
    env_file:
      - .env
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–∑ .env):
- `OPENAI_API_KEY` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- `OPENAI_MODEL` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gpt-4o`)
- `OPENAI_SERVER` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–∫–∞—Å—Ç–æ–º–Ω—ã–π endpoint)
- `PORT` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8000)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–∏—Ç–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `load_dotenv(find_dotenv(), override=True)` –≤ `src/config.py`.

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã (tests/unit/):
- `test_json_parser.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ JSON, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON, –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- `test_docx_parser.py` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, —Ç–∞–±–ª–∏—Ü (mock —Ñ–∞–π–ª–æ–≤)
- `test_cases_service.py` ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–µ–π—Å–∞ (mock LLM)

### Integration —Ç–µ—Å—Ç—ã (tests/integration/):
- `test_api_cases.py` ‚Äî POST /api/cases/1..7 —á–µ—Ä–µ–∑ FastAPI TestClient (mock LLM)
- `test_api_feedback.py` ‚Äî POST /api/feedback, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ SQLite
- `test_api_metrics.py` ‚Äî GET /api/metrics, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
- `test_api_data.py` ‚Äî GET /api/data/test, –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Playwright E2E (tests/e2e/):
- `test_main_flow.py`:
  - –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000
  - –ù–∞–∂–∞—Ç—å ¬´–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ¬ª
  - –í—ã–±—Ä–∞—Ç—å —Ü–µ–ª—å –∏–∑ dropdown
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–µ–π—Å 1
  - –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–≤–µ—Ç–∞
  - –ù–∞–∂–∞—Ç—å üëç
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- `test_backoffice.py`:
  - –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000/backoffice
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: —Ç–∞–±–ª–∏—Ü–∞ IP, –≥—Ä–∞—Ñ–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–µ–π—Å–∞–º

Playwright E2E –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–æ—Ç–∏–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ `http://localhost:8000`.

---

## –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

| –†–µ—à–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|---------|------------|
| Vanilla JS –≤–º–µ—Å—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ | –ù–µ—Ç build-—à–∞–≥–∞, –ø—Ä–æ—Å—Ç–æ—Ç–∞, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Å–∏—Å—Ç–µ–º—ã |
| SSE –≤–º–µ—Å—Ç–æ WebSocket | –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥; –ø—Ä–æ—â–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ FastAPI + JS |
| SQLite –≤–º–µ—Å—Ç–æ PostgreSQL | –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π; –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ |
| –°–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ sessionStorage | –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏; –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |
| /data/ —Ç–æ–º –≤ docker-compose | –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å metrics.db –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ |
| Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API |

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-----------|
| –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ LLM –ø—Ä–∏ –±–æ–ª—å—à–æ–π –∫–∞—Ä—Ç–µ —Ü–µ–ª–µ–π | LLMService –ª–æ–≤–∏—Ç ContextWindowExceededError, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É –∫–ª–∏–µ–Ω—Ç—É |
| DOCX —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º | DocxParser —Å fallback –Ω–∞ plain text; –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π |
| –î–æ–ª–≥–∏–π streaming –æ—Ç–≤–µ—Ç (>30—Å) | SSE —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ; —Ç–∞–π–º–∞—É—Ç 120—Å |
| Playwright —Ç–µ—Å—Ç—ã –≤ Docker | Playwright —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ; E2E –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏–∑ —Ö–æ—Å—Ç–∞ –ø—Ä–æ—Ç–∏–≤ localhost:8000 |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–µ—Ä–µ–¥–∞—Ç—å Developer –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. –ë–∞–∑–æ–≤–∞—è FastAPI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + static serving
2. JsonParser + DocxParser
3. LLMService + CasesService (7 –∫–µ–π—Å–æ–≤)
4. MetricsStorage + middleware
5. Frontend (index.html + app.js)
6. Backoffice (backoffice.html + backoffice.js)
7. –¢–µ—Å—Ç—ã (unit, integration, E2E)
8. Docker
